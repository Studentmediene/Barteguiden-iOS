<!DOCTYPE HTML>
<html>
	<head>
		<title>OCHamcrest 2.1.0 Reference</title>
		<meta http-equiv="Content-Type" content="application/xhtml+xml;charset=utf-8" />
		<link rel="stylesheet" type="text/css" href="css/styles.css" />
		<meta name="generator" content="appledoc 2.0.4 (build 703)" />
	</head>
	<body>
		<article>
			<div id="overview_contents" role="main">
				<div class="main-navigation navigation-top">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">OCHamcrest 2.1.0 Reference</h1>
					</div>		
				</div>
				<div id="container">
					
					<div class="section section-overview index-overview">
						
						
						<p>!<a href="http://hamcrest.org/images/logo.jpg">ochamcrest</a></p>

<h1>What is OCHamcrest?</h1>

<p>OCHamcrest is:</p>

<p>* a library of &ldquo;matcher&rdquo; objects that let you declare rules for whether a given
  object matches the criteria or not.</p>

<h1>!~** a framework for writing your own matchers.</h1>

<p>Matchers are useful for a variety of purposes, such as UI validation. But
they&rsquo;re most commonly used for writing unit tests that are expressive and
flexible.</p>

<p>OCHamcrest is used for both iOS or OS X development, and is compatible with:</p>

<p>* XCTest</p>

<h1>!~** OCUnit (SenTestingKit)</h1>

<p>* Kiwi</p>

<h1>!~** Cedar</h1>

<p>* GHUnit</p>

<h1>!~** Google Toolbox for Mac (GTM)</h1>

<p>* OCMock</p>

<h1>!~** OCMockito</h1>

<h1>How do I add OCHamcrest to my project?</h1>

<p><strong>Building:</strong></p>

<p>If you want to build OCHamcrest yourself, clone the repo, then</p>

<p><code>sh
$ git submodule update --init
$ cd Source
$ ./MakeDistribution.sh
</code></p>

<p>If you have doxygen installed somewhere other than the Applications folder &mdash;
in /usr/local/bin, for example &mdash; use this as the build step:</p>

<p><code>sh
$ DOXYGEN=/usr/local/bin/doxygen ./MakeDistribution.sh
</code></p>

<p>Or just use the pre-built release available at
<a href="http://qualitycoding.org/resources/">QualityCoding.org</a>.</p>

<p><strong>iOS Project Setup:</strong></p>

<p>Add OCHamcrestIOS.framework to your project.</p>

<p>Add:</p>

<pre><code>#define HC_SHORTHAND
#import &lt;OCHamcrestIOS/OCHamcrestIOS.h&gt;
</code></pre>

<p><strong>OS X Project Setup:</strong></p>

<p>Add OCHamcrest.framework to your project.</p>

<p>Add a Copy Files build phase to copy OCHamcrest.framework to your Products
Directory. For unit test bundles, make sure this Copy Files phase comes before
the Run Script phase that executes tests.</p>

<p>Add:</p>

<pre><code>#define HC_SHORTHAND
#import &lt;OCHamcrest/OCHamcrest.h&gt;
</code></pre>

<p>Note: If your Console shows</p>

<pre><code>otest[57510:203] *** NSTask: Task create for path '...' failed: 22, "Invalid argument".  Terminating temporary process.
</code></pre>

<p>double-check your Copy Files phase.</p>

<h1>My first OCHamcrest test</h1>

<p>We&rsquo;ll start by writing a very simple Xcode unit test, but instead of using
OCUnit&rsquo;s <code>STAssertEqualObjects</code> function, we&rsquo;ll use OCHamcrest&rsquo;s
<code>assertThat</code> construct and a predefined matcher:</p>

<p>```obj-c</p>

<h1>import &lt;SenTestingKit/SenTestingKit.h></h1>

<h1>define HC_SHORTHAND</h1>

<h1>import &lt;OCHamcrest/OCHamcrest.h></h1>

<p>@interface BiscuitTest : SenTestCase
@end</p>

<p>@implementation BiscuitTest</p>

<ul>
<li>(void)testEquals
{
  Biscuit<em> theBiscuit = [Biscuit biscuitNamed:@&ldquo;Ginger&rdquo;];
  Biscuit</em> myBiscuit = [Biscuit biscuitNamed:@&ldquo;Ginger&rdquo;];
  assertThat(theBiscuit, equalTo(myBiscuit));
}</li>
</ul>


<p>@end
```</p>

<p>The <code>assertThat</code> function is a stylized sentence for making a test assertion.
In this example, the subject of the assertion is the object <code>theBiscuit</code>,
which is the first method parameter. The second method parameter is a matcher
for <code>Biscuit</code> objects, here a matcher that checks one object is equal to
another using the <code>-isEqual:</code> method. The test passes since the <code>Biscuit</code>
class defines an <code>-isEqual:</code> method.</p>

<p>OCHamcrest&rsquo;s functions are actually declared with an &ldquo;HC&rdquo; package prefix (such
as <code>HC_assertThat</code> and <code>HC_equalTo</code>) to avoid name clashes. To make test
writing faster and test code more legible, shorthand macros are provided if
<code>HC_SHORTHAND</code> is defined before including the OCHamcrest header. For example,
instead of writing <code>HC_assertThat</code>, simply write <code>assertThat</code>.</p>

<h1>Predefined matchers</h1>

<p>OCHamcrest comes with a library of useful matchers:</p>

<ul>
<li><p>Object</p>

<ul>
<li><code>conformsTo</code> &ndash; match object that conforms to protocol</li>
<li><code>equalTo</code> &ndash; match equal object</li>
<li><code>hasDescription</code> &ndash; match object&rsquo;s <code>-description</code></li>
<li><code>hasProperty</code> &ndash; match return value of method with given name</li>
<li><code>instanceOf</code> &ndash; match object type</li>
<li><code>isA</code> &ndash; match object type precisely, no subclasses</li>
<li><code>nilValue</code>, <code>notNilValue</code> &ndash; match <code>nil</code>, or not <code>nil</code></li>
<li><code>sameInstance</code> &ndash; match same object</li>
</ul>
</li>
<li><p>Number</p>

<ul>
<li><code>closeTo</code> &ndash; match number close to a given value</li>
<li>equalTo&lt;TypeName&gt; &ndash; match number equal to a primitive number (such as
<code>equalToInt</code> for an <code>int</code>)</li>
<li><code>greaterThan</code>, <code>greaterThanOrEqualTo</code>, <code>lessThan</code>,
<code>lessThanOrEqualTo</code> &ndash; match numeric ordering</li>
</ul>
</li>
<li><p>Text</p>

<ul>
<li><code>containsString</code> &ndash; match part of a string</li>
<li><code>endsWith</code> &ndash; match the end of a string</li>
<li><code>equalToIgnoringCase</code> &ndash; match the complete string but ignore case</li>
<li><code>equalToIgnoringWhitespace</code> &ndash; match the complete string but ignore
extra whitespace</li>
<li><code>startsWith</code> &ndash; match the beginning of a string</li>
<li><code>stringContainsInOrder</code> &ndash; match parts of a string, in relative order</li>
</ul>
</li>
<li><p>Logical</p>

<ul>
<li><code>allOf</code> &ndash; &ldquo;and&rdquo; together all matchers</li>
<li><code>anyOf</code> &ndash; &ldquo;or&rdquo; together all matchers</li>
<li><code>anything</code> &ndash; match anything (useful in composite matchers when you don&rsquo;t
care about a particular value)</li>
<li><code>isNot</code> &ndash; negate the matcher</li>
</ul>
</li>
<li><p>Collection</p>

<ul>
<li><code>contains</code> &ndash; exactly match the entire collection</li>
<li><code>containsInAnyOrder</code> &ndash; match the entire collection, but in any order</li>
<li><code>hasCount</code> &ndash; match number of elements against another matcher</li>
<li><code>hasCountOf</code> &ndash; match collection with given number of elements</li>
<li><code>hasEntries</code> &ndash; match dictionary with list of key-value pairs</li>
<li><code>hasEntry</code> &ndash; match dictionary containing a key-value pair</li>
<li><code>hasItem</code> &ndash; match if given item appears in the collection</li>
<li><code>hasItems</code> &ndash; match if all given items appear in the collection, in any order</li>
<li><code>hasKey</code> &ndash; match dictionary with a key</li>
<li><code>hasValue</code> &ndash; match dictionary with a value</li>
<li><code>isEmpty</code> &ndash; match empty collection</li>
<li><code>onlyContains</code> &ndash; match if collection&rsquo;s items appear in given list</li>
</ul>
</li>
<li><p>Decorator</p>

<ul>
<li><code>describedAs</code> &ndash; give the matcher a custom failure description</li>
<li><code>is</code> &ndash; decorator to improve readability &ndash; see <code>Syntactic sugar</code> below</li>
</ul>
</li>
</ul>


<p>The arguments for many of these matchers accept not just a matching value, but
another matcher, so matchers can be composed for greater flexibility. For
example, <code>only_contains(endsWith(@"."))</code> will match any collection where
every item is a string ending with period.</p>

<h1>Syntactic sugar</h1>

<p>OCHamcrest strives to make your tests as readable as possible. For example, the
<code>is</code> matcher is a wrapper that doesn&rsquo;t add any extra behavior to the
underlying matcher. The following assertions are all equivalent:</p>

<p><code>obj-c
assertThat(theBiscuit, equalTo(myBiscuit));
assertThat(theBiscuit, is(equalTo(myBiscuit)));
assertThat(theBiscuit, is(myBiscuit));
</code></p>

<p>The last form is allowed since <code>is</code> wraps non-matcher arguments with
<code>equalTo</code>. Other matchers that take matchers as arguments provide similar
shortcuts, wrapping non-matcher arguments in <code>equalTo</code>.</p>

<h1>Writing custom matchers</h1>

<p>OCHamcrest comes bundled with lots of useful matchers, but you&rsquo;ll probably find
that you need to create your own from time to time to fit your testing needs.
This commonly occurs when you find a fragment of code that tests the same set of
properties over and over again (and in different tests), and you want to bundle
the fragment into a single assertion. By writing your own matcher you&rsquo;ll
eliminate code duplication and make your tests more readable!</p>

<p>Let&rsquo;s write our own matcher for testing if a calendar date falls on a Saturday.
This is the test we want to write:</p>

<p>```obj-c
&ndash; (void)testDateIsOnASaturday
{</p>

<pre><code>NSCalendarDate* date = [NSCalendarDate dateWithString:@"26 Apr 2008" calendarFormat:@"%d %b %Y"];
assertThat(date, is(onASaturday()))
</code></pre>

<p>}
```</p>

<p>Here&rsquo;s the interface:</p>

<p>```obj-c</p>

<h1>import &lt;OCHamcrest/<a href="Classes/HCBaseMatcher.html"><code>HCBaseMatcher</code></a>.h></h1>

<h1>import &lt;objc/objc-api.h></h1>

<p>@interface IsGivenDayOfWeek : <a href="Classes/HCBaseMatcher.html"><code>HCBaseMatcher</code></a>
{</p>

<pre><code>NSInteger day;      // Sunday is 0, Saturday is 6
</code></pre>

<p>}</p>

<ul>
<li>(id)isGivenDayOfWeek:(NSInteger)dayOfWeek;</li>
<li>(id)initWithDay:(NSInteger)dayOfWeek;</li>
</ul>


<p>@end</p>

<p>OBJC_EXPORT id <a href="Protocols/HCMatcher.html"><code>HCMatcher</code></a> onASaturday();
```</p>

<p>The interface consists of two parts: a class definition, and a factory function
(with C binding). Here&rsquo;s what the implementation looks like:</p>

<p>```obj-c</p>

<h1>import &ldquo;IsGivenDayOfWeek.h&rdquo;</h1>

<h1>import &lt;OCHamcrest/HCDescription.h></h1>

<p>@implementation IsGivenDayOfWeek</p>

<ul>
<li><p>(id)isGivenDayOfWeek:(NSInteger)dayOfWeek
{
  return [[self alloc] initWithDay:dayOfWeek];
}</p></li>
<li><p>(id)initWithDay:(NSInteger)dayOfWeek
{
  self = [super init];
  if (self)
      day = dayOfWeek;
  return self;
}</p></li>
</ul>


<p>// Test whether item matches.
&ndash; (BOOL)matches:(id)item
{</p>

<pre><code>if (![item respondsToSelector:@selector(dayOfWeek)])
    return NO;

return [item dayOfWeek] == day;
</code></pre>

<p>}</p>

<p>// Describe the matcher.
&ndash; (void)describeTo:(id <HCDescription>)description
{</p>

<pre><code>NSString* dayAsString[] =
    { @"Sunday", @"Monday", @"Tuesday", @"Wednesday", @"Thursday", @"Friday", @"Saturday" };
[[description appendText:@"calendar date falling on "] appendText:dayAsString[day]];
</code></pre>

<p>}</p>

<p>@end</p>

<p>id <HCMatcher> onASaturday()
{</p>

<pre><code>return [IsGivenDayOfWeek isGivenDayOfWeek:6];
</code></pre>

<p>}
```</p>

<p>For our Matcher implementation we implement the <code>-matches:</code> method (which
calls <code>-dayOfWeek</code> after confirming that the argument has such a method) and
the <code>-describe_to:</code> method (which is used to produce a failure message when a
test fails). Here&rsquo;s an example of how the failure message looks:</p>

<pre><code>NSCalendarDate* date = [NSCalendarDate dateWithString: @"6 April 2008" calendarFormat: @"%d %B %Y"];
assertThat(date, is(onASaturday()));
</code></pre>

<p>fails with the message</p>

<pre><code>Expected: is calendar date falling on Saturday, got: &lt;06 April 2008&gt;
</code></pre>

<p>and Xcode shows it as a build error. Clicking the error message takes you to the
assertion that failed.</p>

<p>Even though the <code>onASaturday</code> function creates a new matcher each time it is
called, you should not assume this is the only usage pattern for your matcher.
Therefore you should make sure your matcher is stateless, so a single instance
can be reused between matches.</p>

<h1>More resources</h1>

<p>* <a href="http://hamcrest.org/OCHamcrest/">Documentation</a></p>

<h1>!~** <a href="https://github.com/hamcrest/OCHamcrest">Sources</a></h1>

<p>* <a href="http://hamcrest.org">Hamcrest</a></p>

<h1>!~** <a href="http://qualitycoding.org/">Quality Coding</a> &ndash; Tools, tips &amp;</h1>

<p>techniques for <em>building quality in</em> to iOS development</p>
						
						
					</div>
					
					
					
					<div class="index-column">
						<h2 class="index-title">Class References</h2>
						<ul>
							
							<li><a href="Classes/HCAllOf.html">HCAllOf</a></li>
							
							<li><a href="Classes/HCAnyOf.html">HCAnyOf</a></li>
							
							<li><a href="Classes/HCBaseDescription.html">HCBaseDescription</a></li>
							
							<li><a href="Classes/HCBaseMatcher.html">HCBaseMatcher</a></li>
							
							<li><a href="Classes/HCClassMatcher.html">HCClassMatcher</a></li>
							
							<li><a href="Classes/HCConformsToProtocol.html">HCConformsToProtocol</a></li>
							
							<li><a href="Classes/HCDescribedAs.html">HCDescribedAs</a></li>
							
							<li><a href="Classes/HCHasCount.html">HCHasCount</a></li>
							
							<li><a href="Classes/HCHasDescription.html">HCHasDescription</a></li>
							
							<li><a href="Classes/HCHasProperty.html">HCHasProperty</a></li>
							
							<li><a href="Classes/HCInvocationMatcher.html">HCInvocationMatcher</a></li>
							
							<li><a href="Classes/HCIs.html">HCIs</a></li>
							
							<li><a href="Classes/HCIsAnything.html">HCIsAnything</a></li>
							
							<li><a href="Classes/HCIsCloseTo.html">HCIsCloseTo</a></li>
							
							<li><a href="Classes/HCIsCollectionContaining.html">HCIsCollectionContaining</a></li>
							
							<li><a href="Classes/HCIsCollectionContainingInAnyOrder.html">HCIsCollectionContainingInAnyOrder</a></li>
							
							<li><a href="Classes/HCIsCollectionContainingInOrder.html">HCIsCollectionContainingInOrder</a></li>
							
							<li><a href="Classes/HCIsCollectionOnlyContaining.html">HCIsCollectionOnlyContaining</a></li>
							
							<li><a href="Classes/HCIsDictionaryContaining.html">HCIsDictionaryContaining</a></li>
							
							<li><a href="Classes/HCIsDictionaryContainingEntries.html">HCIsDictionaryContainingEntries</a></li>
							
							<li><a href="Classes/HCIsDictionaryContainingKey.html">HCIsDictionaryContainingKey</a></li>
							
							<li><a href="Classes/HCIsDictionaryContainingValue.html">HCIsDictionaryContainingValue</a></li>
							
							<li><a href="Classes/HCIsEmptyCollection.html">HCIsEmptyCollection</a></li>
							
							<li><a href="Classes/HCIsEqual.html">HCIsEqual</a></li>
							
							<li><a href="Classes/HCIsEqualIgnoringCase.html">HCIsEqualIgnoringCase</a></li>
							
							<li><a href="Classes/HCIsEqualIgnoringWhiteSpace.html">HCIsEqualIgnoringWhiteSpace</a></li>
							
							<li><a href="Classes/HCIsEqualToBool.html">HCIsEqualToBool</a></li>
							
							<li><a href="Classes/HCIsIn.html">HCIsIn</a></li>
							
							<li><a href="Classes/HCIsInstanceOf.html">HCIsInstanceOf</a></li>
							
							<li><a href="Classes/HCIsNil.html">HCIsNil</a></li>
							
							<li><a href="Classes/HCIsNot.html">HCIsNot</a></li>
							
							<li><a href="Classes/HCIsSame.html">HCIsSame</a></li>
							
							<li><a href="Classes/HCIsTypeOf.html">HCIsTypeOf</a></li>
							
							<li><a href="Classes/HCOrderingComparison.html">HCOrderingComparison</a></li>
							
							<li><a href="Classes/HCStringContains.html">HCStringContains</a></li>
							
							<li><a href="Classes/HCStringContainsInOrder.html">HCStringContainsInOrder</a></li>
							
							<li><a href="Classes/HCStringDescription.html">HCStringDescription</a></li>
							
							<li><a href="Classes/HCStringEndsWith.html">HCStringEndsWith</a></li>
							
							<li><a href="Classes/HCStringStartsWith.html">HCStringStartsWith</a></li>
							
							<li><a href="Classes/HCSubstringMatcher.html">HCSubstringMatcher</a></li>
							
						</ul>
					</div>
					
					
						
					<div class="index-column">
						
						<h2 class="index-title">Protocol References</h2>
						<ul>
							
							<li><a href="Protocols/HCDescription.html">HCDescription</a></li>
							
							<li><a href="Protocols/HCMatcher.html">HCMatcher</a></li>
							
							<li><a href="Protocols/HCSelfDescribing.html">HCSelfDescribing</a></li>
							
						</ul>
						
						
					</div>
					
				</div>
				<div class="main-navigation navigation-bottom">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2013 Jon Reid. All rights reserved. (Last updated: 2013-08-21)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.4 (build 703)</a>.</span></p>
						
	
					</div>
				</div>
			</div>
		</article>		
	</body>
</html>